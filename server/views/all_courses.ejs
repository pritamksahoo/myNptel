<!DOCTYPE HTML>
<html>
	<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Productivo | Browse Courses</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Free HTML5 Website Template by freehtml5.co" />
	<meta name="keywords" content="free website templates, free html5, free template, free bootstrap, free website template, html5, css3, mobile first, responsive" />
	<meta name="author" content="freehtml5.co" />

	<!-- 
	//////////////////////////////////////////////////////

	FREE HTML5 TEMPLATE 
	DESIGNED & DEVELOPED by FreeHTML5.co
		
	Website: 		http://freehtml5.co/
	Email: 			info@freehtml5.co
	Twitter: 		http://twitter.com/fh5co
	Facebook: 		https://www.facebook.com/fh5co

	//////////////////////////////////////////////////////
	 -->

  	<!-- Facebook and Twitter integration -->
	<meta property="og:title" content=""/>
	<meta property="og:image" content=""/>
	<meta property="og:url" content=""/>
	<meta property="og:site_name" content=""/>
	<meta property="og:description" content=""/>
	<meta name="twitter:title" content="" />
	<meta name="twitter:image" content="" />
	<meta name="twitter:url" content="" />
	<meta name="twitter:card" content="" />

	<link href="https://fonts.googleapis.com/css?family=Work+Sans:300,400,500,700,800" rel="stylesheet">
	
	<!-- Animate.css -->
	<link rel="stylesheet" href="/css/animate.css">
	<!-- Icomoon Icon Fonts-->
	<link rel="stylesheet" href="/css/icomoon.css">
	<!-- Bootstrap  -->
	<link rel="stylesheet" href="/css/bootstrap.css">

	<!-- Magnific Popup -->
	<link rel="stylesheet" href="/css/magnific-popup.css">

	<!-- Owl Carousel  -->
	<link rel="stylesheet" href="/css/owl.carousel.min.css">
	<link rel="stylesheet" href="/css/owl.theme.default.min.css">

	<!-- Theme style  -->
	<link rel="stylesheet" href="/css/style.css">
	<link href="//netdna.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.6.3/css/bootstrap-select.min.css" />
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://cdn.datatables.net/1.10.19/css/dataTables.bootstrap.min.css">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

	  <link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.2.3/css/responsive.bootstrap.min.css">
	  <!--<link rel="stylesheet" href="https://cdn.datatables.net/1.10.19/css/select.bootstrap4.min.css">
	  <link rel="stylesheet" href="https://cdn.datatables.net/1.10.19/css/colReorder.bootstrap4.min.css">-->
	  <link rel="stylesheet" href="//cdn.datatables.net/plug-ins/1.10.19/features/searchHighlight/dataTables.searchHighlight.css">
	  <link rel="stylesheet" href="https://cdn.datatables.net/fixedheader/3.1.5/css/fixedHeader.bootstrap.min.css">
	  



	<style>
		.wrapper{
		  width:90%;
		}
		@media(max-width:992px){
		 .wrapper{
		  width:100%;
		} 
		}
		.panel-heading {
		  padding: 0;
			border:0;
		}
		.panel-title>a, .panel-title>a:active{
			display:block;
			padding:15px;
		  color:#555;
		  font-size:16px;
		  font-weight:bold;
			text-transform:uppercase;
			letter-spacing:1px;
		  word-spacing:3px;
			text-decoration:none;
		}
		.panel-heading  a:before {
		   font-family: 'Glyphicons Halflings';
		   content: "\e114";
		   float: right;
		   transition: all 0.5s;
		}
		.panel-heading.active a:before {
			-webkit-transform: rotate(180deg);
			-moz-transform: rotate(180deg);
			transform: rotate(180deg);
		} 
		.add-on .input-group-btn > .btn {
		  border-left-width:0;left:-2px;
		  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
		  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
		}
		/* stop the glowing blue shadow */
		.add-on .form-control:focus {
		 box-shadow:none;
		 -webkit-box-shadow:none; 
		 border-color:#cccccc; 
		}
		.form-control{width:20%}
		.navbar-nav > li > a {
		  border-right: 1px solid #ddd;
		  padding-bottom: 15px;
		  padding-top: 15px;
		}
		.navbar-nav:last-child{ border-right:0}
	</style>
	
	<script src="https://code.jquery.com/jquery-3.3.1.js"></script>
    <!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>-->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.1.1/angular.min.js"></script>
	<!-- Modernizr JS -->
	<script src="/js/modernizr-2.6.2.min.js"></script>
	<script src="//netdna.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
	<!--<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>-->
	
	<script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
	<script src="https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap.min.js"></script>
	
	  <script src="https://cdn.datatables.net/responsive/2.2.3/js/dataTables.responsive.min.js"></script>
	  <script src="https://cdn.datatables.net/responsive/2.2.3/js/responsive.bootstrap.min.js"></script>
	  <!--<script src="https://cdn.datatables.net/1.10.19/js/dataTables.colReorder.min.js"></script>
	  <script src="https://cdn.datatables.net/1.10.19/js/dataTables.select.min.js"></script>-->
	  <script src="//bartaz.github.io/sandbox.js/jquery.highlight.js"></script>
	  <script src="//cdn.datatables.net/plug-ins/1.10.19/features/searchHighlight/dataTables.searchHighlight.min.js"></script>
	  <script src="https://cdn.datatables.net/fixedheader/3.1.5/js/dataTables.fixedHeader.min.js"></script>



	<!-- FOR IE9 below -->
	<!--[if lt IE 9]>
	<script src="js/respond.min.js"></script>
	<![endif]-->

	</head>
	<body>

		
	<div class="fh5co-loader"></div>
	
	<div id="page">
	<nav class="fh5co-nav" role="navigation">
		<div class="top">
			<div class="container">
				<div class="row">
					<div class="col-xs-12 text-right">
						<p class="num">Call: +91 740 736 4481</p>
						<ul class="fh5co-social">
							<li><a href="https://twitter.com/PritamK37149199" target='_blank'><i class="icon-twitter"></i></a></li>
							<li><a href="https://github.com/pritamksahoo" target='_blank'><i class="icon-github"></i></a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
		<div class="top-menu">
			<div class="container">
				<div class="row">
					<div class="col-xs-1">
						<div id="fh5co-logo"><a href="ins_index.ejs">Productivo<span>.</span></a></div>
					</div>
					<div class="col-xs-11 text-right menu-1">
						<ul>
							<li><a href="http://localhost:3000/overview">Home</a></li>
							<li><a href="http://localhost:3000/viewCourses">Your Courses</a></li>
							<li class="active"><a href="http://localhost:3000/viewAllCourses">All Courses</a></li>
							<li><a href="http://localhost:3000/contactUs">Contact</a></li>
							<li class="btn-cta"><a href="#"><span>Welcome, <%=whoami%></span></a></li>
							<li class="btn-cta"><a href="http://localhost:3000/SLogOut"><span>LogOut</span></a></li>
						</ul>
					</div>
				</div>
				
			</div>
		</div>
	</nav>

	<header id="fh5co-header" class="fh5co-cover" role="banner" style="background-image:url(images/img_bg_1.jpg); height: 150px;" data-stellar-background-ratio="0.5">
		<div class="overlay"></div>
	</header>
	

	<div class="container" style="margin-top: 12em; padding-bottom: 4em;" ng-app="myApp" ng-controller="myControl">
	<div class="row">
	  	  <div class="row">
			<div class="input-group col-xs-12">
				<span class="input-group-btn">
					<button class="browse btn input-lg" type="submit" style="background-color: #333344; color: white">
					<i class="glyphicon glyphicon-education" style="color: white"></i>
					 Free Courses
					 </button>
				 </span>
			 </div>
		 </div><br>	
		 <div class="row" style="margin-top: 0px; margin-bottom: 1em; color: #777744">
		 [ <b>NOTE :</b> <i>Some courses may not be accessable beacuse instructor kept them in private mode. They are not listed here</i> ]
		 </div>
		 
	  	<div class="row" style="padding-left: 0px;">
	  		<form class="navbar-form" name="myForm" role="search" style="padding-left: 0px;">
			<div class="input-group add-on" style="padding-left: 0px;">
			  <input class="form-control" placeholder="Search Keywords" ng-model="srch" name="srch" id="srch-term" type="text">
			  <div class="input-group-btn">
				<button class="btn btn-default" type="submit" ng-click="fetchCourses();"><i class="glyphicon glyphicon-search"></i></button>
			  </div>
			</div>
		  </form>
		</div><br>
	 
		 <div class="row" ng-show="data_fetching">Loading...</div>
		 
		 <div class="row" ng-show="data_available">
	      	<div class="row">
	      	<div class="col-md-6" style="margin-bottom: 2em;" ng-repeat="enrolled in data">
		  	<li class="list-group-item">
		  	<h4>{{enrolled.course_name}}<b style="float: right">{{enrolled.rating}} <i class="glyphicon glyphicon-star"></i></b></h4>
		  	<h5 style="color: #777777">{{enrolled.topic_name}}<i class="enroll" style="float: right;">{{enrolled.enroll_count}} enrolled</i></h5>
		  	<hr style="margin-top: 3px; margin-bottom: 2px;">
		  	<small>-- <i>{{(enrolled.instructor_details)[0].firstname}} {{(enrolled.instructor_details)[0].lastname}} | {{(enrolled.instructor_details)[0].organization}}</i></small>
		  	<br><br>
		  	<button type="submit" class="btn btn-success" ng-show="enrolled.isEnrolled == 'no'" ng-click="registerCourse($event,enrolled.course_name,enrolled.topic_name,enrolled.instructor);" style="padding: 2px; padding-left: 5px; padding-right: 5px; margin-bottom: 3px;">
          		Register
        	</button>
        	<b ng-show="enrolled.isEnrolled == 'yes'"><i class="browse glyphicon glyphicon-ok"></i> Already Registered</b>
        	<br>
		  	</li>
		  	</div>
		  	</div>
		</div>
	   
	</div>
	</div>

	<footer id="fh5co-footer" role="contentinfo">
		<div class="container">
			<div class="row row-pb-md">
				<div class="col-md-3 fh5co-widget">
					<h4>About Learning</h4>
					<p>Facilis ipsum reprehenderit nemo molestias. Aut cum mollitia reprehenderit. Eos cumque dicta adipisci architecto culpa amet.</p>
				</div>
				<div class="col-md-2 col-sm-4 col-xs-6 col-md-push-1">
					<h4>Learning</h4>
					<ul class="fh5co-footer-links">
						<li><a href="#">Course</a></li>
						<li><a href="#">Blog</a></li>
						<li><a href="#">Contact</a></li>
						<li><a href="#">Terms</a></li>
						<li><a href="#">Meetups</a></li>
					</ul>
				</div>

				<div class="col-md-2 col-sm-4 col-xs-6 col-md-push-1">
					<h4>Learn &amp; Grow</h4>
					<ul class="fh5co-footer-links">
						<li><a href="#">Blog</a></li>
						<li><a href="#">Privacy</a></li>
						<li><a href="#">Testimonials</a></li>
						<li><a href="#">Handbook</a></li>
						<li><a href="#">Held Desk</a></li>
					</ul>
				</div>

				<div class="col-md-2 col-sm-4 col-xs-6 col-md-push-1">
					<h4>Engage us</h4>
					<ul class="fh5co-footer-links">
						<li><a href="#">Marketing</a></li>
						<li><a href="#">Visual Assistant</a></li>
						<li><a href="#">System Analysis</a></li>
						<li><a href="#">Advertise</a></li>
					</ul>
				</div>

				<div class="col-md-2 col-sm-4 col-xs-6 col-md-push-1">
					<h4>Legal</h4>
					<ul class="fh5co-footer-links">
						<li><a href="#">Find Designers</a></li>
						<li><a href="#">Find Developers</a></li>
						<li><a href="#">Teams</a></li>
						<li><a href="#">Advertise</a></li>
						<li><a href="#">API</a></li>
					</ul>
				</div>
			</div>

			<div class="row copyright">
				<div class="col-md-12 text-center">
					<p>
						<small class="block">&copy; 2016 Free HTML5. All Rights Reserved.</small> 
						<small class="block">Designed by <a href="http://freehtml5.co/" target="_blank">FreeHTML5.co</a> Demo Images: <a href="http://unsplash.co/" target="_blank">Unsplash</a></small>
					</p>
					<p>
						<ul class="fh5co-social-icons">
							<li><a href="#"><i class="icon-twitter"></i></a></li>
							<li><a href="#"><i class="icon-facebook"></i></a></li>
							<li><a href="#"><i class="icon-linkedin"></i></a></li>
							<li><a href="#"><i class="icon-dribbble"></i></a></li>
						</ul>
					</p>
				</div>
			</div>

		</div>
	</footer>
	</div>

	<div class="gototop js-top">
		<a href="#" class="js-gotop"><i class="icon-arrow-up"></i></a>
	</div>
	
	
	<script>

	var app = angular.module('myApp', []);
		
	app.controller('myControl', function($scope, $http) {
		
		$scope.srch = "";
		$scope.data_available = false;
		$scope.registered = false;
		$scope.data_fetching = false;
	
		$scope.registerCourse = function(v) {
			console.log(v);
		};
		
		$scope.fetchCourses = function() {
			var s_topic = $scope.srch;
			//console.log(s_topic);
			$scope.data_available = false;
			$scope.data_fetching = true;
			var user = '<%=whoami%>';
			$http({
                method: 'POST',
                url: 'http://localhost:3000/findCourseBasedOnTopic',
                dataType: "json",
                data: {
                    'topic': s_topic,
                    'user': user
                },
                contentType: "application/json",
            }).then(function(response) {
            	var mydata = response.data['search_results'];
				$scope.data = mydata;
				$scope.data_fetching = false;
	            $scope.data_available = true;
            }, function(response) {
            
            });
		}
		
		$scope.registerCourse = function(event, course_name, topic_name, instructor) {
		 var user = '<%=whoami%>';
		 if ($(event.target).html() != 'Registered') {
			 $(event.target).html('Registering...');
				$http({
		            method: 'POST',
		            url: 'http://localhost:3000/registerCourse',
		            dataType: "json",
		            data: {
		                'course_name': course_name,
						'topic_name': topic_name,
						'instructor': instructor,
						'student': user
		                
		            },
		            contentType: "application/json",
		        }).then(function(response) {
		        	var mydata = response.data['message'];
					  if (mydata == 'ok_register') {
					  	alert('You have successfully registered for ' + course_name);
					  	 $(event.target).html("Registered");
					  } else {
					  	alert('Some error occurred! Try again later');
					  	$(event.target).html('Register');
					  }
			        	
		        }, function(response) {
		        
		        });
			};
		}
	
	});

	</script>
	
	
	<!-- jQuery -->
	<!--<script src="js/jquery.min.js"></script>-->
	<!-- jQuery Easing -->
	<script src="js/jquery.easing.1.3.js"></script>
	<!-- Bootstrap -->
	<script src="js/bootstrap.min.js"></script>
	<!-- Waypoints -->
	<script src="js/jquery.waypoints.min.js"></script>
	<!-- Stellar Parallax -->
	<script src="js/jquery.stellar.min.js"></script>
	<!-- Carousel -->
	<script src="js/owl.carousel.min.js"></script>
	<!-- countTo -->
	<script src="js/jquery.countTo.js"></script>
	<!-- Magnific Popup -->
	<script src="js/jquery.magnific-popup.min.js"></script>
	<script src="js/magnific-popup-options.js"></script>
	<!-- Main -->
	<script src="js/main.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.6.3/js/bootstrap-select.min.js"></script>

	</body>
</html>

